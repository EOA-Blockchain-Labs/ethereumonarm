# /etc/ethereum/op-challenger.conf

# Configuration for Optimism Fault Proof Challenger
# See https://docs.optimism.io/op-stack/fault-proofs/challenger
# and https://github.com/ethereum-optimism/optimism/tree/develop/op-challenger

# ------------------------------------------------------------------------------
# General Configuration
# ------------------------------------------------------------------------------
# Directory to store challenger data
DATADIR="/home/ethereum/.op-challenger"

# Number of L1 confirmations required
NUM_CONFIRMATIONS=1

# ------------------------------------------------------------------------------
# RPC Endpoints
# ------------------------------------------------------------------------------
# L1 Ethereum Execution Layer RPC (e.g. Geth, Nethermind)
L1_ETH_RPC="http://localhost:8545"

# L1 Beacon Chain RPC (e.g. Lighthouse, Prysm)
L1_BEACON_RPC="http://localhost:5052"

# L2 Rollup Node RPC (op-node)
ROLLUP_RPC="http://localhost:8547"

# L2 Execution Layer RPC (op-geth)
L2_ETH_RPC="http://localhost:9545"

# ------------------------------------------------------------------------------
# Game Configuration
# ------------------------------------------------------------------------------
# Address of the DisputeGameFactoryProxy contract
# Check https://docs.optimism.io/chain/addresses for the correct address for your network
GAME_FACTORY_ADDRESS="0x..."

# Game types to challenge (e.g. cannon, permissioned)
# "permissioned" is often required alongside "cannon" for some networks
TRACE_TYPE="cannon,permissioned"

# Optional: Allowlist of dispute games to challenge (if restricted)
# GAME_ALLOWLIST="0x..."

# ------------------------------------------------------------------------------
# Cannon Trace Configuration
# ------------------------------------------------------------------------------
# Path to the cannon executable
CANNON_BIN="/usr/bin/cannon"

# Path to the op-program executable (server mode)
CANNON_SERVER="/usr/bin/op-program"

# Path to the absolute prestate of the fault proof VM
CANNON_PRESTATE="/path/to/prestate.bin.gz"

# Path to the L2 Genesis file
CANNON_L2_GENESIS="/path/to/genesis.json"

# Path to the Rollup configuration file
CANNON_ROLLUP_CONFIG="/path/to/rollup.json"

# Optional: Snapshot frequency
# CANNON_SNAPSHOT_FREQ=1000000000

# ------------------------------------------------------------------------------
# Transaction Signer
# ------------------------------------------------------------------------------
# You must specify either a Private Key or a Mnemonic (and optional HD path)

# Private Key (hex string with or without 0x prefix)
# PRIVATE_KEY=""

# Mnemonic string
MNEMONIC=""

# HD Path for Mnemonic (default: "m/44'/60'/0'/0/0")
HD_PATH="m/44'/60'/0'/0/0"

# ------------------------------------------------------------------------------
# Additional Arguments
# ------------------------------------------------------------------------------
# Add any other custom arguments here
EXTRA_ARGS=""

# ------------------------------------------------------------------------------
# Final Argument Construction
# ------------------------------------------------------------------------------
ARGS="--datadir=$DATADIR \
      --num-confirmations=$NUM_CONFIRMATIONS \
      --l1-eth-rpc=$L1_ETH_RPC \
      --l1-beacon=$L1_BEACON_RPC \
      --rollup-rpc=$ROLLUP_RPC \
      --l2-eth-rpc=$L2_ETH_RPC \
      --game-factory-address=$GAME_FACTORY_ADDRESS \
      --trace-type=$TRACE_TYPE \
      --cannon-bin=$CANNON_BIN \
      --cannon-server=$CANNON_SERVER \
      --cannon-prestate=$CANNON_PRESTATE \
      --cannon-l2-genesis=$CANNON_L2_GENESIS \
      --cannon-rollup-config=$CANNON_ROLLUP_CONFIG \
      $EXTRA_ARGS"

# Add Allowlist if set
if [ -n "$GAME_ALLOWLIST" ]; then
    ARGS="$ARGS --game-allowlist=$GAME_ALLOWLIST"
fi

# Add Signer configuration
if [ -n "$PRIVATE_KEY" ]; then
    ARGS="$ARGS --private-key=$PRIVATE_KEY"
elif [ -n "$MNEMONIC" ]; then
    ARGS="$ARGS --mnemonic=\"$MNEMONIC\" --hd-path=\"$HD_PATH\""
fi
